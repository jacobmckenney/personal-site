/*! For license information please see analytics.js.LICENSE.txt */
(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(a)?a:String(a)),r)}var a}var n=100,i=function(){return(new Date).getTime()};function r(e){return Math.floor((i()-e)/n)}"performance"in window&&(i=function(){try{return Math.round(window.performance.now()+window.performance.timing.navigationStart)}catch(e){}return(new Date).getTime()});var a=function(){if("function"!=typeof window.performance.getEntries)return 0;var e=window.performance.getEntries();e=(e=e.filter((function(e){return"link"==e.initiatorType||"script"==e.initiatorType}))).filter((function(e){return e.startTime<window.performance.timing.domInteractive}));for(var t=0,n=0;n<e.length;++n)t=Math.max(t,e[n].responseEnd);return t};function o(e,t){t[e]||(t[e]=[])}function s(e,t,n,i){i[e]&&(i[e][n]=t)}(window.navigator.userAgent.indexOf("Chrome")>-1||window.navigator.userAgent.indexOf("Opera")>-1)&&(a=function(){for(var e=window.performance.getEntriesByType("paint"),t=null,n=null,i=0;i<e.length;++i)switch(e[i].name){case"first-paint":t=e[i];case"first-contentful-paint":n=e[i]}return!(!t||!n)&&Math.floor(Math.max(t.startTime,n.startTime))});var d=0,l=document.hidden,u=void 0;l&&(u=i()),document.addEventListener("visibilitychange",(function(){l&&!document.hidden&&(d+=i()-u,l=document.hidden),!l&&document.hidden&&(u=i(),l=document.hidden)}));var c,v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.epoch=window.performance.timing.navigationStart?window.performance.timing.navigationStart:i(),this.ctciDict={},this.isServerSide=t.isServerSide,0==t.isServerSide?this.startTime=(new Date).getTime():this.startTime=i()}var l,u;return l=e,u=[{key:"isVisuallyReady",value:function(){var e,t=(e=this.epoch,"number"==typeof window.performance.timing.domContentLoadedEventEnd&&window.performance.timing.domContentLoadedEventEnd-e),n=a();if("number"==typeof n&&t){var i=Math.floor(Math.max(n,t));return this.isServerSide?i:i+this.epoch<this.startTime?0:i}return!1}},{key:"LongTaskMonitor",value:function(){var e=this;if(window.PerformanceObserver&&window.PerformanceLongTaskTiming){this.perfObserver=new window.PerformanceObserver((function(t){s("longTaskDetails",t.getEntries(),r(e.startTime),e.ctciDict)}));try{this.perfObserver.observe({entryTypes:["longtask"]})}catch(e){return}o("longTaskDetails",this.ctciDict),o("longtask",this.ctciDict)}}},{key:"PageBusyMonitor",value:function(){var e=this;o("busy",this.ctciDict);var t=Math.floor(3.125),n=i(),r=[],a=[];return{onReport:function(n,i){var o=r.length;if(0!==o){for(var d=0,l=0;d<o&&r[d]<n;)a[d]&&++l,++d;l+=t-d,s("busy",Math.round(l/t*100),i,e.ctciDict),r.splice(0,d),a.splice(0,d)}else s("busy",100,i,e.ctciDict)},pageBusyIntervalHandle:setInterval((function(){var e=i(),t=e-n;n=e,t>68&&(t-=32*Math.floor((t-32)/32)),r.push(e),a.push(t>36)}),32)}}},{key:"FrameRateMonitor",value:function(){var e=this;o("fps",this.ctciDict),window.requestAnimationFrame((function t(n){var i,a,o;i="fps",a=r(e.startTime),(o=e.ctciDict)[i]&&(o[i][a]||(o[i][a]=0),o[i][a]+=1),e.isResolved()||e.stopped||window.requestAnimationFrame(t)}))}},{key:"getHiddenTime",value:function(){return d-this.ttihtInitial}},{key:"getCTCIMeasurement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tti,n=e.longTaskFpsTime;return{visuallyReady:this.visuallyReady,tti:t,longTaskFpsTime:n,ttiht:this.getHiddenTime(),timeline:this.ctciDict}}},{key:"isResolved",value:function(){return void 0!==this.ctciDict.tti}},{key:"isAbandoned",value:function(){return this.abandoned}},{key:"getAbandonedTime",value:function(){return this.abandonedTime}},{key:"measureCTCI",value:function(e){var t=this;return this.ttihtInitial=d,new Promise((function(i,a){if(t.abandoned)a(t.getCTCIMeasurement());else{t.measureCTCIResolve=i,t.measureCTCIReject=a;var o=function(e){var a=0,o=0,s=0,d=0,l=Math.max(0,r(t.startTime)-1);t.LongTaskMonitor(),t.FrameRateMonitor(),t.pageBusyMonitor=t.PageBusyMonitor(),t.ttiIntervalHandle=setInterval((function(){for(var u=r(t.startTime),c=l;c<u;c++){var v=t.startTime+(c+1)*n;if(t.pageBusyMonitor.onReport(v,c),t.ctciDict.longtask&&t.ctciDict.longtask[c])a=0,s=0;else if(t.ctciDict.fps&&(!t.ctciDict.fps[c]||t.ctciDict.fps[c]<2))a=0,s=0;else if(s++,0===d&&s>=5&&(d=e+(c-5)*n,t.ctciDict.longTaskFpsTime=d),t.ctciDict.busy&&t.ctciDict.busy[c]>50)a=0;else if(++a>=5){o=e+(c-5)*n,o=Math.max(o,e),t.ctciDict.tti=o;break}}l=u,o>0&&(t.__stop(),i(t.getCTCIMeasurement({tti:o,longTaskFpsTime:d})))}),n)};t.visuallyReadyIntervalHandle=setInterval((function(){var n=t.isVisuallyReady();!1!==n&&(t.visuallyReady=n,clearInterval(t.visuallyReadyIntervalHandle),delete t.visuallyReadyIntervalHandle,e?e.then((function(){o(n)}),(function(){t.__cancel()})):o(n))}),n)}}))}},{key:"abandon",value:function(){this.abandoned=!0,this.abandonedTime=i(),this.__cancel()}},{key:"__cancel",value:function(){this.cancelled=!0,this.__stop(),"function"==typeof this.measureCTCIReject&&this.measureCTCIReject(this.getCTCIMeasurement())}},{key:"__stop",value:function(){this.stopped=!0;var e=this.visuallyReadyIntervalHandle,t=this.pageBusyMonitor,n=this.ttiIntervalHandle;e&&(clearInterval(e),delete this.visuallyReadyIntervalHandle),t&&t.pageBusyIntervalHandle&&(clearInterval(t.pageBusyIntervalHandle),delete this.pageBusyMonitor.pageBusyIntervalHandle),n&&(clearInterval(n),delete this.ttiIntervalHandle),this.perfObserver&&(this.perfObserver.disconnect(),delete this.perfObserver)}}],u&&t(l.prototype,u),Object.defineProperty(l,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e){return"object"===h(e)&&e&&Object.getPrototypeOf(e)===Object.prototype}function m(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function g(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}var _="FrameworkReady",w="START",k="READY",T=(g(c={},w,w),g(c,k,k),c);Object.freeze(T);var S=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__startTime=i(),this.dependencies={},this.timing=(g(t={},w,{}),g(t,k,{}),t),this.__dependenciesMap={},this.__pending={},this.__finished={},this.__pendingDependencies={},this.__inversePendingDependencies={},this.__waitForFrameworkReadyResolve=[],this.__waitForFrameworkReadyReject=[]}var t,n;return t=e,(n=[{key:"log",value:function(){}},{key:"measureTime",value:function(){return i()-this.__startTime}},{key:"__evaluateComponentReady",value:function(e){var t=this;if(void 0===this.__pending[e]||!0===this.__pending[e])return!1;var n=this.__pendingDependencies[e];if(n&&!m(n))return!1;this.timing[k][e]=this.measureTime(),this.__finished[e]=!0;var i=this.__inversePendingDependencies[e];i&&!m(i)&&Object.keys(i).forEach((function(n){delete t.__pendingDependencies[n][e],delete i[e],t.__evaluateComponentReady(n)})),e!==_||this.isAbandoned()||this.__waitForFrameworkReadyResolve.forEach((function(e){e(t)}))}},{key:"markComponentReady",value:function(e,t){if(t===k){if(!1===this.__pending[e])return;this.__pending[e]=!1,this.__evaluateComponentReady(e)}else{if(void 0!==this.__pending[e])return;this.timing[w][e]=this.measureTime(),this.__pending[e]=!0}}},{key:"markFrameworkReady",value:function(e){this.markComponentReady(_,w),Array.isArray(e)&&e.length>0&&this.waitForComponentsReady(_,e),this.markComponentReady(_,k)}},{key:"waitForComponentsReady",value:function(e,t){var n=this,i=this.__pendingDependencies[e];f(i)||(i=this.__pendingDependencies[e]={});var r=this.__dependenciesMap[e];f(r)||(r=this.__dependenciesMap[e]={}),t.forEach((function(t){if(r[t]=!0,!n.__finished[t]){var a=n.__inversePendingDependencies[t];f(a)||(a=n.__inversePendingDependencies[t]={}),a[e]=!0,i[t]=!0}})),this.dependencies[e]=Object.keys(r),this.__evaluateComponentReady(e)}},{key:"isFrameworkReady",value:function(){return this.__finished[_]}},{key:"isAbandoned",value:function(){return this.abandoned}},{key:"waitForFrameworkReady",value:function(){var e=this;return new Promise((function(t,n){e.isFrameworkReady()?e.isAbandoned()?n(e):t(e):(e.__waitForFrameworkReadyResolve.push(t),e.__waitForFrameworkReadyReject.push(n))}))}},{key:"abandon",value:function(){this.isFrameworkReady()||(this.abandoned=!0,this.__waitForFrameworkReadyReject.forEach((function(e){e(this)})))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==I(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===I(r)?r:String(r)),i)}var r}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorHandler=t,this.observers=[]}var t,n;return t=e,n=[{key:"addObserver",value:function(e){this.observers.push(e)}},{key:"removeObserver",value:function(e){var t=this.observers.indexOf(e);t>=0&&this.observers.splice(t,1)}},{key:"notify",value:function(){var e=this,t=Array.prototype.slice.call(arguments),n=void 0;return this.observers.forEach((function(i){try{n=i.apply(void 0,t.concat([n]))}catch(t){e.errorHandler(t)}})),n}}],n&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),E=/^.*takt\.a2z\.com.*analytics.*$/g,O=/^c\.t\.(.+)$/;function P(e){var t;window.BOOMR&&"function"==typeof window.BOOMR.init?e():(t=e,document.addEventListener?document.addEventListener("onBoomerangLoaded",t):document.attachEvent&&document.attachEvent("onpropertychange",(function(e){e||(e=event),"onBoomerangLoaded"===e.propertyName&&t(e)})))}function M(e){return e?e.filter((function(e){return e})):[]}function D(e,t){var n=e.indexOf(t);e.splice(n,1)}function B(){return(new Date).getTime()}function F(){return Math.random().toString(16).slice(2)}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}var x={object:!0,string:!0,boolean:!0,number:!0,undefined:!0,null:!0},L=/^#((\/[^?]+)+)\??.*$/;function j(e){var t=e.match(L);return t?t[1]:""}function z(e){var t=e.length-1;return"/"===e[t]?e.substring(0,t):e}function H(e,t){return z(e)!==z(t)}var N={selectorDepth:4,sessionLength:6,pushInterval:15e3,hoverDuration:2e3,oversizedRequestSize:8e3,oversizedCTCITime:15e3,dataSelectorKeys:["taktId"],dataContentKeys:["taktValue"],clickRegex:/a|button|select|input|textarea|label|span|li|img|svg|path|video/i,hoverRegex:/html|body/i,unknownError:"Takt:UnknownError",hover:{lastTarget:null,lastTimestamp:null,logged:!1}},V=65536,U=262144,J={SERVER_SIDE:"serverSide",PUSH_STATE:"pushState",REPLACE_STATE:"replaceState",POPSTATE:"popstate",HASHCHANGE:"hashchange"},q=new Map,K=N.util={now:B,uuid:F,getUniqueId:function(){return B()+"_"+F()},hasPathnameChangedInURL:function(e,t){return!!H(e.pathname,t.pathname)||H(j(e.hash),j(t.hash))},validateMetadata:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=A(t),r=!0,a=[];if(x[i]){if("object"===i&&t){var o=Object.getPrototypeOf(t);if(o!==Object.prototype)r=!1,a.push({type:o.constructor.toString(),prop:n.slice()});else for(var s in t)if(t.hasOwnProperty(s)){n.push(s);var d=e(t[s],n);n.pop(),r=r&&d.valid,a=a.concat(d.errors)}}}else r=!1,a.push({type:i,prop:n.slice()});return{valid:r,errors:a}},mergeMetadata:function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=f(n);if(void 0===t){if(a){var o={};for(var s in n)n.hasOwnProperty(s)&&(r.push(s),o[s]=e(void 0,n[s],i,r),r.pop());return o}return n}if(f(t)&&a)for(var d in n)n.hasOwnProperty(d)&&(r.push(d),t[d]=e(t[d],n[d],i,r),r.pop());else i(r);return t},addEventListener:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent("on"+t,n)},user_agent:function(){return window.navigator.userAgent},post:function(e,t,n,i){if(i&&"function"==typeof window.navigator.sendBeacon)n(!!window.navigator.sendBeacon(e,JSON.stringify(t))&&204);else{var r=new XMLHttpRequest;r.open("POST",e),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){return n(r.status)},r.onerror=n,r.send(JSON.stringify(t))}},isElementClickRecorded:function(e){return!!e&&(N.clickRegex.test(e.tagName)||K.isElementClickRecorded(e.parentNode))},cacheEventTarget:function(e){q.set(e,K.getEventTarget(e))},getCachedEventTarget:function(e){return q.get(e)?q.get(e):e.target},deleteCachedEventTarget:function(e){q.delete(e)},getEventTarget:function(e){try{var t=e.composedPath();if(t){var n=t[0];return t.length&&t.filter((function(e){return!n.shadowRoot&&!!e.shadowRoot})).length>0?n:e.target}return e.target}catch(t){return e.target}},getEventMetadata:function(e){var t={};switch(e.type){case"error":if(t.message=e.error?e.error.message:e.message,t.stack=e.error?e.error.stack:e.stack,"string"!=typeof t.message||0==t.message.length){t.message=N.unknownError;var n={name:(e.error?e.error:e).name};e.target&&Object.assign(n,K.getElementInfo(e.target)),t.stack=JSON.stringify(n)}"string"==typeof t.stack&&(t.stack=t.stack.substr(0,V));break;case"custom":"string"==typeof(t=e.data).details&&(t.details=t.details.substr(0,V));break;case"metric":t=e.data;break;default:t=K.getElementInfo(K.getCachedEventTarget(e))}return t},getElementInfo:function(e){return{selector:K.getElementSelector(e),content:K.getElementContent(e),takt_id:K.getElementTaktId(e),attributes:JSON.stringify(K.getLeafNodeNameAttribute(e)),takt_feature_id:K.getTaktFeatureID(e)}},getLeafNodeNameAttribute:function(e){var t=e.name;return"string"==typeof t&&t?{name:t}:{}},getElementSelector:function(e,t){var n=e.className,i=(e.dataset,e.id),r=e.nodeName,a=K.getTaktId(e),o=r;if(a&&(o+="@"+a),i&&(o+="#"+i.replace(/\./g,"\\\\.")),"string"==typeof n&&n&&(o+="."+n.split(/\s+/g).join(".")),!a&&!i&&e.parentNode){t||(t=N.selectorDepth);var s=K.getElementSelector(e.parentNode,t-1);o=t<0?s:s+" "+o}return o},getElementTaktContent:function(e,t){e.className;var n=e.dataset,i=(e.id,e.nodeName,null);if(n)for(var r in N.dataContentKeys){var a=n[N.dataContentKeys[r]];if(a){i=a;break}}return!i&&e.parentNode?(t||(t=N.selectorDepth),t<0?void 0:K.getElementTaktContent(e.parentNode,t-1)):i},getElementContent:function(e){var t=K.getElementTaktContent(e);if(t)return t;var n=e.innerText;return e.title||(n&&""!==n||!e.parentNode||(n=e.parentNode.innerText?e.parentNode.innerText.trim():""),"string"==typeof n&&(n=n.substr(0,V)),n||"")},getTaktId:function(e){var t=e.dataset;if(t)for(var n in N.dataSelectorKeys){var i=t[N.dataSelectorKeys[n]];if(i)return i}return null},getTaktFeatureID:function(e){var t=e.dataset;return t&&t.taktFeature?t.taktFeature:null},getElementTaktId:function(e){var t=K.getTaktId(e);return!t&&e.parentNode?K.getElementTaktId(e.parentNode):t},getSerializedKeyValueSizeInBytes:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;return(i+=5+e.length)+("string"==typeof t?t.length*n:JSON.stringify(t).length*n)},getSerializedEventPayloadSizeInBytes:function(e){var t=2;t+=K.getSerializedKeyValueSizeInBytes("event_id",e.event_id)+1,t+=K.getSerializedKeyValueSizeInBytes("timestamp",e.timestamp.toString(10))+1,t+=13;var n=e.metadata;for(var i in n)n.hasOwnProperty(i)&&(t+=K.getSerializedKeyValueSizeInBytes(i,n,4)+1);return t}};function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Y(i.key),i)}}function $(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==W(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===W(t)?t:String(t)}function X(e){return e.length>0?"'".concat(e.join("."),"' in metadata"):"metadata"}K.getSelector=K.getElementSelector,N.event_filters={click:function(e){K.cacheEventTarget(e);var t=K.getCachedEventTarget(e);return K.isElementClickRecorded(t)},mousemove:function(e){var t=e.target;if(N.hoverRegex.test(t.tagName))return!1;if(N.hover.lastTarget===t){if(!N.hover.logged&&(new Date).getTime()-N.hover.lastTimestamp>=N.hoverDuration)return N.hover.logged=!0,!0}else N.hover.logged=!1,N.hover.lastTarget=t,N.hover.lastTimestamp=(new Date).getTime();return!1}},N.analytics=function(){var e=["load","click","submit","change","error"],t=/^.*preprod$/g,n=function(){function n(i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),$(this,"ComponentReadyState",T),$(this,"VisitType",J),this.observableErrorHandler=this.observableErrorHandler.bind(this),this.abandonPendingCTCIWhenPathChanged=this.abandonPendingCTCIWhenPathChanged.bind(this),this.sessionObservable=new C(this.observableErrorHandler),this.visitObservable=new C(this.observableErrorHandler),this.eventObservable=new C(this.observableErrorHandler),this.beforeCTCIObservable=new C(this.observableErrorHandler),this.afterCTCIObservable=new C(this.observableErrorHandler),this.beforeFrameworkReadyObservable=new C(this.observableErrorHandler),this.afterFrameworkReadyObservable=new C(this.observableErrorHandler),this.afterBoomerangCTCIObservable=new C(this.observableErrorHandler),Object.getPrototypeOf(this).log=function(){},this.log("Initializing for app ".concat(i.app_id)),this.sushiPayloads=this.createTypePayloads(),this.sushiInflightPayloads=this.createTypePayloads(),this.payload_callbacks={event:function(){r.buildEventPayloads()}},this.screen_resolution(),this.device_pixel_ratio=window.devicePixelRatio,this.event_cache={},this.event_loggers={},this.visit_callbacks=[],this.tab_info={},this.app_id=i.app_id,this.enable_framework_ready=i.enable_framework_ready,this.identify(i.user_id),this.setUserMetadata(i.user_metadata),this.sushi=i.sushi,this.sushi_endpoint="https://".concat(this.sushi.endpoint,"/1/events/").concat(this.sushi.channelId);var a;a=t.test(this.sushi.channelId)?"edgeoptimized.gamma.":"edgeoptimized.prod.",this.tls_endpoint="https://".concat(a).concat("logging.takt.a2z.com"),P(this.initializeBoomerang.bind(this)),this.logVisit(J.SERVER_SIDE),P(this.initializeBoomerangBeaconHandler.bind(this,this.visit_id,this.ctci,this.componentReady));for(var o=0;o<e.length;o++){var s=e[o];this.event_loggers[s]=this.createEventLogger(s),K.addEventListener(window,s,this.event_loggers[s])}if(this.event_loggers.beforeunload=this.createEventLogger("beforeunload"),"object"===W(window.history)){var d=window.history.pushState;window.history.pushState=function(e,t,n){d.call(window.history,e,t,n),r.buildEventPayloads(),r.logVisit(J.PUSH_STATE)};var l=window.history.replaceState;window.history.replaceState=function(e,t,n){l.call(window.history,e,t,n),r.buildEventPayloads(),r.logVisit(J.REPLACE_STATE)},K.addEventListener(window,"popstate",(function(e){r.buildEventPayloads(),r.logVisit(J.POPSTATE)}))}else K.addEventListener(window,"hashchange",(function(){r.buildEventPayloads(),r.logVisit(J.HASHCHANGE)}))}var i,r;return i=n,r=[{key:"initializeBoomerang",value:function(){window.BOOMR.init({Continuity:{enabled:!0,afterOnload:!0,waitAfterOnload:6e4,ttiWaitForFrameworkReady:this.enable_framework_ready,sendLog:!1,sendTimeline:!0}})}},{key:"initializeBoomerangBeaconHandler",value:function(e,t,n){var i=this;this.boomerangBeaconSent=!1,window.BOOMR.subscribe("before_beacon",(function(n){if(!i.boomerangBeaconSent){i.boomerangBeaconSent=!0;var r=t.getHiddenTime();for(var a in n=Object.assign({"c.tti.ht":r},n),t.isAbandoned()&&(n["c.tti.ab"]=!0,n["c.tti.abt"]=t.getAbandonedTime()),i.boomerangMetrics=n,n){var o=a.match(O);if(o){var s=n[a];delete n[a];var d=o[1],l={key:a,size:s.length,timeline:s};i.logMetric({context:"takt:boomerang:timeline:".concat(d),details:JSON.stringify(l)},e)}}i.logMetric({context:"takt:boomerang:beacon",details:JSON.stringify(n)},e);var u=n["c.tti.vr"],c=n["c.tti"]||6e4;t.isAbandoned()||("function"==typeof uet&&(uet("bb","takt_boomr_vr",{wb:1}),uet("bb","takt_boomr_tti",{wb:1}),r<=0&&"hidden"!==n["vis.st"]&&uet("bb","takt_boomr_tti_zero_ht",{wb:1})),"function"==typeof uex&&ue&&ue.markers&&"number"==typeof ue.markers.tc&&(uex("ld","takt_boomr_vr",{wb:1},ue.markers.tc+u),uex("ld","takt_boomr_tti",{wb:1},ue.markers.tc+c),r<=0&&"hidden"!==n["vis.st"]&&uex("ld","takt_boomr_tti_zero_ht",{wb:1},ue.markers.tc+c))),i.afterBoomerangCTCIObservable.notify(n)}}))}},{key:"observableErrorHandler",value:function(e){this.log(e),e.type="error",this.event_loggers.error(e)}},{key:"createTypePayloads",value:function(){return{session:[],visit:[],event:[]}}},{key:"appendTypePayload",value:function(e,t){this.sushiPayloads[e].push(t)}},{key:"getComponentReadyMetrics",value:function(e){return{crs:e.timing.START,crr:e.timing.READY,crd:e.dependencies}}},{key:"measureCTCI",value:function(e,t){var n=this;if(this.componentReady&&this.beforeFrameworkReadyObservable.notify(this.componentReady,this.visit_payload),!this.ctci||!1!==this.beforeCTCIObservable.notify(this.ctci,this.visit_payload)){var i,r=this.ctci=new v({isServerSideLoad:e}),a=this.componentReady=new S,o=function(e){return Object.assign(e,n.getComponentReadyMetrics(a))};if(this.enable_framework_ready){var s=a.waitForFrameworkReady(),d=function(){P((function(){window.BOOMR.plugins.Continuity.frameworkReady()}));var i=r.getHiddenTime(),o=n.getComponentReadyMetrics(a);if(o.ttiht=i,a.isAbandoned()&&(o.abandoned=!0,o.abandonedTime=r.getAbandonedTime()),n.componentReadyMetrics=o,n.logMetric({context:"takt:framework_ready",details:JSON.stringify(o)},t),!a.isAbandoned()&&ue&&ue.markers&&"number"==typeof ue.markers.tc){var s=ue.markers.tc+o.crs.FrameworkReady,d=ue.markers.tc+o.crr.FrameworkReady;"function"==typeof uex&&(uex("ld","takt_frs",{wb:1},s),uex("ld","takt_frr",{wb:1},d),e&&(uex("ld","takt_frs_ipl",{wb:1},s),uex("ld","takt_frr_ipl",{wb:1},d)),i<=0&&(uex("ld","takt_frs_zero_ht",{wb:1},s),uex("ld","takt_frr_zero_ht",{wb:1},d),e&&(uex("ld","takt_frs_zero_ht_ipl",{wb:1},s),uex("ld","takt_frr_zero_ht_ipl",{wb:1},d))))}n.afterFrameworkReadyObservable.notify(a)};s.then(d,d),i=r.measureCTCI(s).then(o,(function(e){throw o(e)}))}else i=r.measureCTCI();var l=function(e){var t={visuallyReady:e.visuallyReady,ttiht:e.ttiht,tti:e.tti,longTaskFpsTime:e.longTaskFpsTime};return n.enable_framework_ready&&(t.crs=e.crs,t.crr=e.crr,t.crd=e.crd),r.isAbandoned()&&(t.abandoned=!0,t.abandonedTime=r.getAbandonedTime()),t};setTimeout((function(){if(!r.isResolved()&&!r.isAbandoned()){var e=r.getCTCIMeasurement();n.enable_framework_ready&&(e=o(e));var i=l(e),a=e.timeline;a.longTaskDetails&&(i.longTaskDetails=M(a.longTaskDetails)),n.logCustom({context:"takt:oversized_page_metrics",details:JSON.stringify(i)},t)}}),N.oversizedCTCITime);var u=function(i){var a=i.timeline;a.longTaskDetails&&(a.longTaskDetails=M(a.longTaskDetails));var o=l(i);n.metrics=i;var s=i.visuallyReady,d=i.ttiht,u=i.tti,c=i.longTaskFpsTime;n.logMetric({context:"takt:page_metrics",details:JSON.stringify(o)},t),r.isAbandoned()||("function"==typeof uet&&(uet("bb","takt_visuallyReady",{wb:1},s),uet("bb","takt_longTaskFpsTime",{wb:1},c),uet("bb","takt_ttiht",{wb:1},d),uet("bb","takt_ctci",{wb:1},u),d<=0&&(uet("bb","takt_ctci_zero_ht",{wb:1},u),e&&uet("bb","takt_ctci_zero_ht_ipl",{wb:1},u))),"function"==typeof uex&&(uex("ld","takt_visuallyReady",{wb:1}),uex("ld","takt_longTaskFpsTime",{wb:1}),uex("ld","takt_ttiht",{wb:1}),uex("ld","takt_ctci",{wb:1}),d<=0&&(uex("ld","takt_ctci_zero_ht",{wb:1}),e&&uex("ld","takt_ctci_zero_ht_ipl",{wb:1})))),n.afterCTCIObservable.notify(r)};return i.then(u,(function(e){u(e)}))}}},{key:"abandonPendingCTCI",value:function(){var e=this.componentReady,t=this.ctci;!e||e.isFrameworkReady()||e.isAbandoned()||e.abandon(),!t||t.isResolved()||t.isAbandoned()||t.abandon()}},{key:"hasPathnameChangedForVisitPayload",value:function(e){if(e.serverSideLoad)return!1;var t=new URL(e.visit_url),n=new URL(e.referrer_url);return K.hasPathnameChangedInURL(t,n)}},{key:"abandonPendingCTCIWhenPathChanged",value:function(){this.hasPathnameChangedForVisitPayload(this.visit_payload)&&this.abandonPendingCTCI()}},{key:"abandonPendingCTCIOnClientSidePathChange",value:function(){this.registerBeforeCTCICallback(this.abandonPendingCTCIWhenPathChanged)}},{key:"log",value:function(){var e=arguments[0];"string"==typeof e&&(arguments[0]="[takt:analytics] ".concat(e)),console&&console.log&&console.log.apply(console,arguments)}},{key:"isInWeblabTreatment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"T1",n=this.user_metadata.weblabs;return(n&&n[e])===t}},{key:"userId",value:function(e){this.new_user=!1;var t=window.localStorage;return e?t&&t.takt_user_id!==e&&(this.new_user=!0):t&&t.takt_user_id?e=t.takt_user_id:(e=K.uuid(),this.new_user=!0),t&&(t.takt_user_id=e),this.user_id=e,this.user_id}},{key:"sessionId",value:function(){this.new_session=!0;var e=K.getUniqueId(),t=window.localStorage,n=t?t.takt_session_timestamp:null;if(n){var i=new Date(n);i.setHours(i.getHours()+N.sessionLength),new Date<i&&!this.new_user&&(this.new_session=!1,e=t?t.takt_session_id:null)}return t&&(t.takt_session_id=e,t.takt_session_timestamp=new Date),this.session_id=e,this.session_id}},{key:"browser_resolution",value:function(){this.browser_width=window.innerWidth,this.browser_height=window.innerHeight}},{key:"screen_resolution",value:function(){this.screen_width=window.screen.width,this.screen_height=window.screen.height}},{key:"identify",value:function(e){if(this.userId(e),this.sessionId(),this.new_user||this.new_session)return this.appendTypePayload("session",{type:"session",app_id:this.app_id,user_id:this.user_id,user_agent:K.user_agent(),session_id:this.session_id,screen_resolution:{screen_width:this.screen_width,screen_height:this.screen_height},device_pixel_ratio:this.device_pixel_ratio})}},{key:"setUserMetadata",value:function(e){var t=this,n=K.validateMetadata(e),i=n.valid,r=n.errors;i&&f(e)?this.user_metadata=e:(this.user_metadata={},r.forEach((function(e){t.log("Invalid type '".concat(e.type,"' for ").concat(X(e.prop)))})))}},{key:"idGetter",value:function(e,t){if("event"==e.type)for(var n in e.events)for(var i=e.events[n],r=0;r<i.length;r++)t.eventId.push(i[r].event_id);"visit"==e.type&&t.visitId.push(e.visit_id),"session"==e.type&&t.sessionId.push(this.session_id)}},{key:"payloadPersister",value:function(e){var t=this;for(var n in this.payload_callbacks)this.payload_callbacks.hasOwnProperty(n)&&this.payload_callbacks[n]();var i=function(e,n){return{type:"event",visit_id:t.visit_id,session_id:t.session_id,sent_timestamp:K.now(),events:{custom:[{timestamp:(new Date).getTime(),metadata:{context:"oversizedSushi",details:JSON.stringify({payloadSize:e,ids:n})},event_id:N.util.getUniqueId()}]}}},r=function n(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,d=e?{primary:t.tls_endpoint,secondary:t.sushi_endpoint}:{primary:t.sushi_endpoint,secondary:t.tls_endpoint};return s<=0?a(i,d.secondary,r,o):K.post(d.primary,i,(function(e){429!=e&&e>=400&&e<500?o(i):!1===e||e<200||e>204?n(i,r,o,s-1):r(i)}),e)},a=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return K.post(n,t,(function(e){!1===e||e<200||e>204?r(t):i(t)}),e)},o=[];for(var s in this.sushiPayloads)this.sushiPayloads.hasOwnProperty(s)&&(o=o.concat(this.sushiPayloads[s].map((function(e){return e.sent_timestamp=K.now(),{data:e}}))));if(o.length>0)for(var d=function(e){e.events.forEach((function(e){var n=e.data;D(t.sushiInflightPayloads[n.type],n)}))},l=function(e){e.events.forEach((function(e){var n=e.data,i=n.type;D(t.sushiInflightPayloads[i],n),t.sushiPayloads[i].unshift(n)}))},u=o.splice(0,2);u.length>0;){var c=JSON.stringify(u).length;if(c>N.oversizedRequestSize){for(var v={sessionId:[],visitId:[],eventId:[]},h=0;h<u.length;h++)this.idGetter(u[h].data,v);r({events:[{data:i(c,v)}]})}u.forEach((function(e){var n=e.data,i=n.type;D(t.sushiPayloads[i],n),t.sushiInflightPayloads[i].push(n)})),r({events:u},d,l),u=o.splice(0,2)}}},{key:"buildEventPayloadSlice",value:function(e,t,n){var i={},r={type:"event",visit_id:t,session_id:e,events:i},a=0,o=0;for(var s in n)if(n.hasOwnProperty(s)){for(var d=n[s],l=0;l<d.length&&a<100;){++a;var u=K.getSerializedEventPayloadSizeInBytes(d[l++]);if(o+u>U){l>1&&(--a,--l);break}o+=u}var c=d.splice(0,l);if(i[s]=c,d.length<=0&&delete n[s],o>=U||a>=100)return r}return r}},{key:"buildEventPayloads",value:function(){var e=this.event_cache,t=this.session_id;for(var n in e)if(e.hasOwnProperty(n)){var i=!1,r={},a=e[n];for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];i=!0,r[o]=s.map((function(e){var t={event_id:e.__takt_event_id,timestamp:e.__takt_timestamp,takt_id:e.__takt_id,metadata:K.getEventMetadata(e)};return K.deleteCachedEventTarget(e),t}))}if(i){for(var d=this.buildEventPayloadSlice(t,n,r);!m(d.events);)this.appendTypePayload("event",d),d=this.buildEventPayloadSlice(t,n,r);delete e[n]}}}},{key:"createEventLogger",value:function(e){var t=this;this.log("Instrumenting event-type ".concat(e));var n=function(n){t.log("Logging event-type ".concat(e)),n.__takt_timestamp=(new Date).getTime(),n.__takt_event_id=K.getUniqueId();var i=t.visit_id;i in t.event_cache||(t.event_cache[i]={});var r=t.event_cache[i];return e in r||(r[e]=[]),K.cacheEventTarget(n),r[e].push(n),t.eventObservable.notify(n),!0},i=N.event_filters[e];return"function"==typeof i?function(e){return!1===i(e)||n(e)}:n}},{key:"logVisit",value:function(e){if(this.visit_url===location.href)return!1;var t=e===J.SERVER_SIDE,n=K.uuid(),i=(new Date).getTime();this.visit_id=i+"_"+n,this.referrer_url=t?document.referrer:this.visit_url,this.visit_url=location.href,this.visit_time=i;var r=document.getElementsByTagName("title")[0];return this.visit_page_title=r?r.innerText:"",this.cloudwatchRUMIntegrationID={},this.visit_metadata=K.mergeMetadata({},this.user_metadata),window.AwsRumClient&&window.AwsRumClient.uuid&&(this.cloudwatchRUMIntegrationID={cloudwatchRUM_integration_ID:window.AwsRumClient.uuid},this.visit_metadata=K.mergeMetadata(this.visit_metadata,this.cloudwatchRUMIntegrationID)),this.updateTabInfo(),this.tabInfo={tabId:window.localStorage.getItem("tabId"),openerTabId:window.localStorage.getItem("openerTabId")},this.visit_metadata=K.mergeMetadata(this.visit_metadata,this.tabInfo),this.browser_history_length=window.history.length,this.visit_type=e,this.serverSideLoad=t,this.browser_resolution(),this.visit_payload={type:"visit",app_id:this.app_id,user_id:this.user_id,visit_id:this.visit_id,session_id:this.session_id,visit_url:this.visit_url,visit_page_title:this.visit_page_title,visit_time:this.visit_time,referrer_url:this.referrer_url,browser_history_length:this.browser_history_length,visit_type:this.visit_type,serverSideLoad:this.serverSideLoad,metadata:this.visit_metadata,browser_resolution:{browser_width:this.browser_width,browser_height:this.browser_height}},this.appendTypePayload("visit",this.visit_payload),this.measureCTCI(t,this.visit_id),this.visitObservable.notify(this.visit_payload),!0}},{key:"logCustom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.visit_id;t in this.event_cache||(this.event_cache[t]={});var n=this.event_cache[t];"custom"in n||(n.custom=[]);var i={type:"custom",__takt_timestamp:(new Date).getTime(),__takt_event_id:K.getUniqueId(),__takt_id:null==e?void 0:e.context,data:e};return n.custom.push(i),this.eventObservable.notify(i),!0}},{key:"logMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.visit_id;t in this.event_cache||(this.event_cache[t]={});var n=this.event_cache[t];"metric"in n||(n.metric=[]);var i={type:"metric",__takt_timestamp:(new Date).getTime(),__takt_event_id:K.getUniqueId(),data:e};return n.metric.push(i),this.eventObservable.notify(i),!0}},{key:"updateTabInfo",value:function(){var e=window.localStorage.getItem("tabId"),t=window.localStorage.getItem("openerTabId"),n=K.uuid();e?t&&window.tabId===e&&window.openerTabId===t||(window.openerTabId=n,window.tabId=n,window.localStorage.setItem("openerTabId",e),window.localStorage.setItem("tabId",n)):(window.tabId=n,window.localStorage.setItem("tabId",n))}},{key:"hasLoggedVisit",value:function(){var e=this.visit_payload;return this.sushiPayloads.visit.indexOf(e)<0}},{key:"addVisitMetadata",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=K.validateMetadata(e),r=i.valid,a=i.errors;r?(K.mergeMetadata(this.visit_metadata,e,(function(e){t.log("Attempted to overwrite ".concat(X(e)))})),n&&K.mergeMetadata(this.user_metadata,e)):a.forEach((function(e){t.log("Invalid type '".concat(e.type,"' for ").concat(X(e.prop)))}))}},{key:"registerVisitCallback",value:function(e){this.visitObservable.addObserver(e)}},{key:"registerSessionCallback",value:function(e){this.sessionObservable.addObserver(e)}},{key:"registerEventCallback",value:function(e){this.eventObservable.addObserver(e)}},{key:"registerBeforeCTCICallback",value:function(e){this.beforeCTCIObservable.addObserver(e)}},{key:"registerAfterCTCICallback",value:function(e){this.afterCTCIObservable.addObserver(e)}},{key:"registerBeforeFrameworkReadyCallback",value:function(e){this.beforeFrameworkReadyObservable.addObserver(e)}},{key:"registerAfterFrameworkReadyCallback",value:function(e){this.afterFrameworkReadyObservable.addObserver(e)}},{key:"registerAfterBoomerangCTCICallback",value:function(e){this.afterBoomerangCTCIObservable.addObserver(e)}},{key:"markComponentReady",value:function(e,t){this.componentReady.markComponentReady(e,t)}},{key:"markFrameworkReady",value:function(e){this.componentReady.markFrameworkReady(e)}},{key:"waitForComponentsReady",value:function(e,t){this.componentReady.waitForComponentsReady(e,t)}},{key:"start",value:function(){var e=this;setInterval((function(){return e.payloadPersister(!1)}),N.pushInterval),K.addEventListener(window,"beforeunload",(function(t){e.event_loggers.beforeunload(t),e.payloadPersister(!0),delete t.returnValue})),K.addEventListener(window,"visibilitychange",(function(){"hidden"==window.document.visibilityState&&e.payloadPersister(!0)}))}}],r&&G(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),n}();return n}.call(void 0);const Q=N;!function(){if(!window.BOOMR||!window.BOOMR.version&&!window.BOOMR.snippetExecuted){var e,t;window.BOOMR=window.BOOMR||{},window.BOOMR.snippetStart=(new Date).getTime(),window.BOOMR.snippetExecuted=!0,window.BOOMR.snippetVersion=14,window.BOOMR.url=(t=(e=function(){if(document.currentScript)return document.currentScript.src;for(var e=document.getElementsByTagName("script"),t=0;t<e.length;++t){var n=e[t].src;if(n.match(E))return n}return"https://prod.embed.takt.a2z.com/analytics.js"}()).substring(0,e.lastIndexOf("/")),"".concat(t,"/").concat("boomerang-1.0.0.min.js"));var n=(document.currentScript||document.getElementsByTagName("script")[0]).parentNode,i=!1,r=document.createElement("link");r.relList&&"function"==typeof r.relList.supports&&r.relList.supports("preload")&&"as"in r?(window.BOOMR.snippetMethod="p",r.href=window.BOOMR.url,r.rel="preload",r.as="script",r.addEventListener("load",(function(){if(!i){var e=document.createElement("script");e.id="boomr-scr-as",e.src=window.BOOMR.url,e.async=!0,n.appendChild(e),i=!0}})),r.addEventListener("error",(function(){a(!0)})),setTimeout((function(){i||a(!0)}),3e3),window.BOOMR_lstart=(new Date).getTime(),n.appendChild(r)):a(!1),window.addEventListener?window.addEventListener("load",o,!1):window.attachEvent&&window.attachEvent("onload",o)}function a(e){i=!0;var t,r,a,o,s=document,d=window;if(window.BOOMR.snippetMethod=e?"if":"i",r=function(e,t){var n=s.createElement("script");n.id=t||"boomr-if-as",n.src=window.BOOMR.url,window.BOOMR_lstart=(new Date).getTime(),(e=e||s.body).appendChild(n)},!window.addEventListener&&window.attachEvent&&navigator.userAgent.match(/MSIE [67]\./))return window.BOOMR.snippetMethod="s",void r(n,"boomr-async");(a=document.createElement("IFRAME")).src="about:blank",a.title="",a.role="presentation",a.loading="eager",(o=(a.frameElement||a).style).width=0,o.height=0,o.border=0,o.display="none",n.appendChild(a);try{d=a.contentWindow,s=d.document.open()}catch(e){t=document.domain,a.src="javascript:var d=document.open();d.domain='"+t+"';void 0;",d=a.contentWindow,s=d.document.open()}t?(s._boomrl=function(){this.domain=t,r()},s.write("<body onload='document._boomrl();'>")):(d._boomrl=function(){r()},d.addEventListener?d.addEventListener("load",d._boomrl,!1):d.attachEvent&&d.attachEvent("onload",d._boomrl)),s.close()}function o(e){window.BOOMR_onload=e&&e.timeStamp||(new Date).getTime()}}(),window.Takt||(window.Takt=Q),window.AmazonUIPageJS||window.P?(window.AmazonUIPageJS||window.P).register("takt",(function(){return Q})):"function"==typeof window.__taktLoaded&&window.__taktLoaded(Q)})();